{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <div class="mb-6 flex items-center justify-between">
        <div class="flex items-center gap-4">
            <a href="/manage/events"
                class="p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors">
                <i class="ph-bold ph-arrow-left text-xl"></i>
            </a>
            <h1 class="text-3xl font-black text-slate-900 tracking-tight">
                {% if event %}Éditer l'événement{% else %}Nouvel événement{% endif %}
            </h1>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-6 md:p-8">
        <form action="{% if event %}/manage/events/{{ event.id }}/update{% else %}/manage/events{% endif %}"
            method="post" enctype="multipart/form-data" class="space-y-6">

            <!-- Basic Info -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Nom de l'événement</label>
                    <input type="text" name="name" value="{{ event.name if event else '' }}" required
                        class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Slug (URL)</label>
                    <input type="text" name="slug" value="{{ event.slug if event else '' }}" required
                        class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">
                </div>
            </div>

            <!-- Location -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Ville</label>
                    <input type="text" name="city" value="{{ event.city if event else '' }}"
                        class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Région</label>
                    <input type="text" name="region" value="{{ event.region if event else '' }}"
                        class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Pays</label>
                    <input type="text" name="country" value="{{ event.country if event else '' }}"
                        class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">
                </div>
            </div>

            <!-- Details -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Circuit (ex: UTMB)</label>
                    <input type="text" name="circuit" value="{{ event.circuit if event else '' }}"
                        class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Site Web</label>
                    <input type="url" name="website" value="{{ event.website if event else '' }}"
                        class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">
                </div>
            </div>

            <div>
                <label class="block text-sm font-bold text-slate-700 mb-2">Image de Profil</label>
                <div class="flex items-center gap-4">
                    {% if event and event.profile_picture %}
                    <img src="{{ event.profile_picture }}"
                        class="w-16 h-16 rounded-lg object-cover border border-slate-200">
                    {% endif %}
                    <input type="file" name="image_file" accept="image/*"
                        class="w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-brand-50 file:text-brand-700 hover:file:bg-brand-100">
                </div>
            </div>

            <div>
                <label class="block text-sm font-bold text-slate-700 mb-2">Description</label>
                <textarea name="description" rows="4"
                    class="w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 outline-none">{{ event.description if event else '' }}</textarea>
            </div>

            <div class="pt-6 border-t border-slate-100 flex justify-end">
                <button type="submit"
                    class="px-8 py-3 bg-brand-600 text-white font-bold rounded-lg hover:bg-brand-700 transition-colors shadow-lg shadow-brand-500/30">
                    Enregistrer
                </button>
            </div>

        </form>
    </div>
</div>
{% endblock %}